<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>News Feed</title>
</head>
<body>
    <h1>Latest News</h1>
    <div id="news-container">Loading news...</div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const rssUrl = 'https://api.rss2json.com/v1/api.json?rss_url=' + encodeURIComponent('https://news.google.com/rss/search?q=mexican+business+regulations&hl=en-US&gl=US&ceid=US:en');
            
            fetch(rssUrl)
                .then(response => response.json())
                .then(data => {
                    const articles = data.items;
                    const container = document.getElementById('news-container');
                    container.innerHTML = '';

                    articles.forEach(article => {
                        // Fetch metadata using Microlink API
                        fetch(`https://api.microlink.io?url=${encodeURIComponent(article.link)}`)
                            .then(response => response.json())
                            .then(metadata => {
                                const imageUrl = metadata.data.image.url;
                                const element = document.createElement('div');
                                element.innerHTML = `
                                    <h4>${article.title}</h4>
                                    <p>${article.description}</p>
                                    <img src="${imageUrl}" alt="Article Image" style="width:100%; max-width:300px;">
                                    <br/>
                                    <a href="${article.link}" target="_blank">Read more</a>
                                `;
                                container.appendChild(element);
                            })
                            .catch(error => console.error('Error fetching metadata:', error));
                    });
                })
                .catch(error => {
                    document.getElementById('news-container').innerHTML = `<p>Error loading news: ${error.message}</p>`;
                    console.error('Error fetching news:', error);
                });
        });
    </script>
</body>
</html>











<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">

    <title>Latest News</title>
</head>
<body>
    <h1>News Feed</h1>
    <div id="news-container"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const url = `https://34.49.15.173`;  // Pointing to your VM
    
            async function fetchNews() {
                try {
                    
                    const response = await fetch(url);
                    const data = await response.json();
                    if (data.status === 'ok') {
                        displayNews(data.articles);
                    } else {
                        console.error('NewsAPI Error:', data.message);
                        document.getElementById('news-container').innerHTML = `<p>Error: ${data.message}</p>`;
                    }
                } catch (error) {
                    console.error('Fetch Error:', error);
                    document.getElementById('news-container').innerHTML = '<p>Failed to fetch news.</p>';
                }
            }
    
            function displayNews(articles) {
                const container = document.getElementById('news-container');
                container.innerHTML = '';  // Clear previous contents
                articles.forEach(article => {
                    const articleDiv = document.createElement('div');
                    articleDiv.innerHTML = `
                        <h2><a href="${article.url}" target="_blank">${article.title}</a></h2>
                        <img src="${article.urlToImage}" alt="Article Image" style="width:100%;height:auto;">
                        <p>${article.description}</p>
                        <p><small>Published at: ${new Date(article.publishedAt).toLocaleString()}</small></p>
                    `;
                    container.appendChild(articleDiv);
                });
            }
    
            fetchNews();
        });
    </script>
    
</body>
</html> -->


