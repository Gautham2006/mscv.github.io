<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Latest News</title>
</head>
<body>
    <h1>News Feed</h1>
    <div id="news-container"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const url = `https://65d9-34-94-131-252.ngrok-free.app/news`;  // Pointing to your VM
    
            async function fetchNews() {
                try {
                    const response = await fetch(url);
                    const data = await response.json();
                    if (data.status === 'ok') {
                        displayNews(data.articles);
                    } else {
                        console.error('NewsAPI Error:', data.message);
                        document.getElementById('news-container').innerHTML = `<p>Error: ${data.message}</p>`;
                    }
                } catch (error) {
                    console.error('Fetch Error:', error);
                    document.getElementById('news-container').innerHTML = '<p>Failed to fetch news.</p>';
                }
            }
    
            function displayNews(articles) {
                const container = document.getElementById('news-container');
                container.innerHTML = '';  // Clear previous contents
                articles.forEach(article => {
                    const articleDiv = document.createElement('div');
                    articleDiv.innerHTML = `
                        <h2><a href="${article.url}" target="_blank">${article.title}</a></h2>
                        <img src="${article.urlToImage}" alt="Article Image" style="width:100%;height:auto;">
                        <p>${article.description}</p>
                        <p><small>Published at: ${new Date(article.publishedAt).toLocaleString()}</small></p>
                    `;
                    container.appendChild(articleDiv);
                });
            }
    
            fetchNews();
        });
    </script>
    
</body>
</html>
